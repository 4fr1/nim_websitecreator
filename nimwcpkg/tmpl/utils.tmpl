#? stdtmpl | standard
#
#template `%`(idx: untyped): untyped =
#  row[idx]
#end template
#
#
#
#
#
#proc genNavbarLoggedinSettings(c: var TData): string =
# result = ""
<div id="navbarSettings" class="container-fluid">
  <div class="row">
    <div class="col-12 col-md-12">
      <div style="display: inline-flex; float: right;">
        <span class="nav-item"><a href="/settings">Settings</a></span>
        <span class="nav-item" style="margin: 0px 15px;"><a href="/logout">Logout</a></span>
      </div>
    </div>
  </div>
</div>
#end proc
#
#
#
#
#
#proc genNavbarLoggedin(c: var TData): string =
# result = ""
<div id="navbarSettings" class="container-fluid">
  <div class="row">
    <div class="col-12 col-md-12">
      <div style="display: inline-flex; float: right;">
        <span class="nav-item"><a href="/users/profile">${c.username}</a></span>
        <span class="nav-item" style="margin: 0px 15px;"><a href="/logout">Logout</a></span>
      </div>
    </div>
  </div>
</div>
#end proc
#
#
#
#
#proc genEditMixed(newPage = true): string =
# result = ""
# if not newPage:
<div id="save" data-ischanged="0" style="display: none;"></div>
# end if
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/codemirror.min.css" integrity="sha256-I8NyGs4wjbMuBSUE40o55W6k6P7tu/7G28/JGUUYCIs=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/theme/monokai.min.css" integrity="sha256-jAukb65gp2gG6t4FtxpHgB3eFwM/rDUwrE2OaAp6+o8=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/codemirror.min.js" integrity="sha256-uRIJ6Wfou5cTtmcCvQNA9lvsYl8sUbZXxnfG+P79ssY=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/mode/xml/xml.min.js" integrity="sha256-QmQ8vh5c1+UzpnyWXYB7nnY1aqpJmXPVkFWtJHJkLnE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/mode/javascript/javascript.min.js" integrity="sha256-soPk2bgFhLwixxuyUzaWVadUMcVwWNE5JZwYdQhL4Xk=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/mode/css/css.min.js" integrity="sha256-YVb7n24DLwrjN0DghcwJYL17MI/X7e3c4EJZr6PwNdY=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/mode/htmlmixed/htmlmixed.min.js" integrity="sha256-CcVYnZJocbbLCyjOo/tA2QEH56hhTBEPZX+che0RYSo=" crossorigin="anonymous"></script>

<script src="/js/codemirror_custom.js" defer></script>

<script src="/js/editors.js" defer></script>

#end proc
#
#
#
#
#proc genEditHtml(): string =
# result = ""
<div id="save" data-ischanged="0" style="display: none;"></div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.css" integrity="sha256-o/v/5fOniPHMAww4EAIfRBFV0SeoqksPrY0Yq5x+wSM=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/theme/monokai.min.css" integrity="sha256-6ov3WWd9ybfZPeJBlXBgQuD/aLhTRCEp5kBhqD9ke0o=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.min.js" integrity="sha256-U/4XQwZXDFDdAHjIZt1Lm7sFfmMiFDZzFYprq6XJ0gk=" crossorigin="anonymous" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/mode/xml/xml.min.js" integrity="sha256-QmQ8vh5c1+UzpnyWXYB7nnY1aqpJmXPVkFWtJHJkLnE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/mode/htmlmixed/htmlmixed.min.js" integrity="sha256-CcVYnZJocbbLCyjOo/tA2QEH56hhTBEPZX+che0RYSo=" crossorigin="anonymous"></script>

<script src="/js/codemirror_custom.js" defer></script>

<script src="/js/editors.js" defer></script>

#end proc
#
#
#
#
#proc genEditJs(): string =
# result = ""
<div id="save" data-ischanged="0" style="display: none;"></div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.css" integrity="sha256-o/v/5fOniPHMAww4EAIfRBFV0SeoqksPrY0Yq5x+wSM=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/theme/monokai.min.css" integrity="sha256-6ov3WWd9ybfZPeJBlXBgQuD/aLhTRCEp5kBhqD9ke0o=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.min.js" integrity="sha256-U/4XQwZXDFDdAHjIZt1Lm7sFfmMiFDZzFYprq6XJ0gk=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/mode/javascript/javascript.min.js" integrity="sha256-MyRbKGolllWYWwxW8jH3jYdhK0p0LpgNjR8PqCa/UNQ=" crossorigin="anonymous"></script>

<script src="/js/codemirror_custom.js" defer></script>

<script src="/js/editors.js" defer></script>

# end proc
#
#
#
#
#proc genEditCss(): string =
# result = ""
<div id="save" data-ischanged="0" style="display: none;"></div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.10/summernote-bs4.css" integrity="sha256-fPUAOwSYkVTnL8xdLidCEi5IxW+ZVfcmNJ4m/+EGVI8=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.10/summernote-bs4.min.js" integrity="sha256-o5hEO6rl7yksLT3gTjQcYYDt03Lx9VwNu81FrO82Ofw=" crossorigin="anonymous" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.css" integrity="sha256-o/v/5fOniPHMAww4EAIfRBFV0SeoqksPrY0Yq5x+wSM=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/theme/monokai.min.css" integrity="sha256-6ov3WWd9ybfZPeJBlXBgQuD/aLhTRCEp5kBhqD9ke0o=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/codemirror.min.js" integrity="sha256-U/4XQwZXDFDdAHjIZt1Lm7sFfmMiFDZzFYprq6XJ0gk=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.37.0/mode/css/css.min.js" integrity="sha256-YVb7n24DLwrjN0DghcwJYL17MI/X7e3c4EJZr6PwNdY=" crossorigin="anonymous"></script>

<script src="/js/codemirror_custom.js" defer></script>

<script src="/js/editors.js" defer></script>

#end proc
#
#
#
#
#proc genProfileJsCss(): string =
# result = ""
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/3.1.4/cropper.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/3.1.4/cropper.min.js" defer></script>
#end proc
#
#
#
#
#proc genPageOptions(c: var TData, page, blog, edit: bool, pageid, stdHead, stdNav, stdFoot: string): string =
# result = ""
#
# var title = ""
# var metadescription = ""
# var metakeywords = ""
#
# if edit:
#   let pageOrBlog = if page == true: "pages" else: "blog"
#   let seoData = getRow(db, sql("SELECT title, metadescription, metakeywords FROM " & pageOrBlog & " WHERE id = ?"), pageid)
#
#   title = seoData[0]
#   metadescription = seoData[1]
#   metakeywords = seoData[2]
# end if
#
# if edit:
<h4 class="has-text-centered">Change editor</h4>
<div class="buttons has-addons columns">
  <div class="column">
    <button class="btn btn-primary switchEditorGrapesJS button is-small is-fullwidth">Switch to GrapesJS</button>
  </div>
  <div class="column">
    <button class="btn btn-primary switchEditorSummernote button is-small is-fullwidth">Switch to Summernote</button>
  </div>
  <div class="column">
    <button class="btn btn-primary switchEditorRawHTML button is-small is-fullwidth">Switch to raw HTML</button>
  </div>
</div>
<hr>
# end if
#
# if edit:
<h4 class="has-text-centered">Delete page</h4>
<div class="notification is-danger">
  If you Delete a page it can not be undone.
</div>
<div class="buttons">
  # if page:
    <span data-url="/page/delete?pageid=$pageid" class="btn btn-danger pageDelete button is-danger" title="If you delete a page it can not be undone">Delete page</span>
  # else:
    <span data-url="/blogpage/delete?blogid=$pageid" class="btn btn-danger blogDelete button is-danger" title="If you delete a blogpost it can not be undone">Delete blogpost</span>
  # end if
</div>
<hr>
# end if

<h4 class="has-text-centered">HTML</h4>
<div style="margin-bottom: 20px;">

  <div class="notification is-warning">
    If you disable standard default components (CSS/JS),
    you have to include Style and JavaScript tags by yourself.
  </div>

  <div class="input-group input-group-sm">

    <div class="field">
      <div class="control">
        <input class="checkbox" type="checkbox" id="standardhead" name="standardhead" ${checkboxToChecked($stdHead)}>
          Use standard head &lt;head&gt;
        </input>
      </div>
    </div>

    <div class="field">
      <div class="control">
        <input class="checkbox" type="checkbox" id="standardnavbar" name="standardnavbar" ${checkboxToChecked($stdNav)}>
          Use standard navbar &lt;navbar&gt;
        </input>
      </div>
    </div>

    <div class="field">
      <div class="control">
        <input class="checkbox" type="checkbox" id="standardfooter" name="standardfooter" ${checkboxToChecked($stdFoot)}>
          Use standard footer &lt;footer&gt;
        </input>
      </div>
    </div>

  </div>
<hr>
<h4 class="has-text-centered">SEO</h4>

<div class="notification is-warning">
  HTML is not allowed, only plain text (ASCII).
</div>

<div style="margin-bottom: 20px;">

  <div class="field">
    <div class="control">
      <label class="label">Title</label>
      <input class="input" type="text" name="title" value="${title}" minlength="2" maxlength="128" >
    </div>
  </div>

  <div class="field">
    <div class="control">
      <label class="label">Meta description</label>
      <textarea class="textarea" name="metadescription" minlength="2" maxlength="128" placeholder="Type or paste your Meta description here..." >${metadescription}</textarea>
    </div>
  </div>

  <div class="field">
    <div class="control">
      <label class="label">Meta keywords</label>
      <textarea class="textarea" name="metakeywords" minlength="2" maxlength="128" placeholder="Separate each keywords with a comma, e.g. blog,design,code" >${metakeywords}</textarea>
    </div>
  </div>

</div>
<a class="button is-outlined is-small" title="Go back to Settings" href="/settings" style="text-align:center">&xlArr; Go to Settings</a>
#end proc
#
#
#
#
#proc genPageEditorMainNew(c: var TData, classBlogPage: string): string =
# result = ""
#
# if c.req.cookies.hasKey("editor") and c.req.cookies["editor"] == "grape":
  <div id="gjs" class="gls">
    <div id="mainContainer" class="${classBlogPage}">
      <h1>Title</h1>
      <p>The first paragraph</p>
      <hr/>
      <div class="row">
        <div class="col-12 col-md-6">
          <p>Column 1</p>
        </div>
        <div class="col-12 col-md-6">
          <p>Column 2</p>
        </div>
      </div>
    </div>
    <style>
      body.gjs-dashed {
        background: transparent;
      }
    </style>
  </div>
  <textarea id="gjshidden" name="editordata" style="display: none"></textarea>
# elif c.req.cookies.hasKey("editor") and c.req.cookies["editor"] == "summernote":
  <textarea id="summernoteHidden" name="editordata" style="display: none;"></textarea>

  <div id="summernote" class="summernote">
    <div id="mainContainer" class="${classBlogPage}">
      <h1>Title</h1>
      <p>The first paragraph</p>
      <hr/>
      <div class="row">
        <div class="col-12 col-md-6">
          <p>Column 1</p>
        </div>
        <div class="col-12 col-md-6">
          <p>Column 2</p>
        </div>
      </div>
    </div>
  </div>
# else:
  <textarea name="editordata" id="editordataCodemirror">
    <div id="mainContainer" class="${classBlogPage}">
      <h1>Title</h1>
      <p>The first paragraph</p>
      <hr/>
      <div class="row">
        <div class="col-12 col-md-6">
          <p>Column 1</p>
        </div>
        <div class="col-12 col-md-6">
          <p>Column 2</p>
        </div>
      </div>
    </div>
  </textarea>
# end if
#end proc
#
#
#
#
#proc genPageEditorMainEdit(c: var TData, content: string): string =
# result = ""
#
# if c.req.cookies.hasKey("editor") and c.req.cookies["editor"] == "grape":
#
  <div id="gjs" class="gls">${content}</div>
  <textarea id="gjshidden" name="editordata" style="display: none"></textarea>
#
# elif c.req.cookies.hasKey("editor") and c.req.cookies["editor"] == "summernote":
#
  <div id="summernoteContainer">
    <textarea id="summernoteHidden" name="editordata" style="display: none;"></textarea>
    <div id="summernote" class="summernote">
      ${content}
    </div>
  </div>
#
# else:
#
  <textarea name="editordata" id="editordataCodemirror" class="textarea">${content}</textarea>
#
# end if
#
#end proc
#
#
#
#
#proc genPageEditorImport(c: var TData, isNewPage: bool): string =
# result = ""
# if c.req.cookies.hasKey("editor") and c.req.cookies["editor"] == "grape":
#
  <script src="https://unpkg.com/grapesjs" defer></script>
  <script src="/js/grapesjsbs4.min.js" defer></script>
  <script src="/js/grapesjs_custom.js" defer></script>
  <script src="/js/editors.js" defer></script>
  <link rel="stylesheet" href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" />
  <script>
  function grapeJsLoadAssets() {
    const am = editor.AssetManager;
    am.add([

  # var multiple = false
  # for file in walkFiles("public/images/*"):
  #   if multiple:
        ,{src: '${replace(file, "public", "")}'}
  #   else:
        {src: '${replace(file, "public", "")}'}
  #     multiple = true
  #   end if
  # end for

    ]);
    am.render();
  }
  </script>
#
# elif c.req.cookies.hasKey("editor") and c.req.cookies["editor"] == "summernote":
#
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.10/summernote-bs4.css" integrity="sha256-fPUAOwSYkVTnL8xdLidCEi5IxW+ZVfcmNJ4m/+EGVI8=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.10/summernote-bs4.js" integrity="sha256-D7wVIdz0dDoz21KQ/Z1cFnFXyrPcomZKBrVGLWE8vhg=" crossorigin="anonymous" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/line-numbers/prism-line-numbers.min.js" defer></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-nim.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-css.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-javascript.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-python.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-bash.min.js" defer></script>
<script src="/js/editors.js" defer></script>
#
# else:
#
  ${genEditMixed(isNewPage)}
#
# end if
#end proc
