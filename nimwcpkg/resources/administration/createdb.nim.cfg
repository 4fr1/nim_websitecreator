import: os
import: parsecfg
import: strutils
import: contra
import: osproc


@if postgres:
  import: db_postgres
  define: """sql_now=(extract(epoch from now())) """
  define: """sql_timestamp=integer """
  define: """sql_id=integer generated by default as identity """
  define: """sqlVacuum=VACUUM (VERBOSE, ANALYZE); """
  define: """fileBackup=nimwc_postgres_"""
  define: """cmdBackup=pg_dump --verbose --no-password --encoding=UTF8 --lock-wait-timeout=99 --host=$1 --port=$2 --username=$3 --file='$4' --dbname=$5 $6 """
@else:
  import: db_sqlite
  define: """sql_now=(strftime('%s', 'now')) """
  define: """sql_timestamp=timestamp """
  define: """sql_id=integer """
  define: """sqlVacuum=VACUUM; """
  define: """fileBackup=nimwc_sqlite_"""
  define: """cmdBackup=sqlite3 -readonly -echo $1 '.backup $2' """
@end
